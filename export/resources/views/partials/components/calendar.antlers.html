{{ if config:app:debug is true }}<!-- ðŸ‘‹ resources/views/partials/components/calendar.antlers.html -->{{ /if }}

<section class="{{ section_width ?? 'w-full' }} py-12">
  <div class="pagewidth">

    {{ if title }}
        <h2 class="text-4xl lg:text-6xl font-bold mb-12 text-center text-gray-900">{{ title }}</h2>
    {{ /if }}

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
      {{# Logic: What's happening next #}}
      {{ $query_start = start_date ?: (hide_past_events ? (now | format('Y-m-d H:i')) : '1900-01-01') }}
      {{ $query_end   = end_date   ?: '2100-01-01' }}

      {{ collection:events
            sort="event_start:asc"
            event_start:lte="{ $query_end }"
            as="events"
      }}
        {{ events }}
            {{# Overlap Logic: (End Date >= Query Start) #}}
            {{# We use event_end if available, otherwise event_start #}}
            {{ $actual_end = (event_end ?? event_start) | format('Y-m-d H:i') }}

            {{ if $actual_end >= $query_start }}
                {{ partial src="{ card_partial ?? 'cards/card-event'}" }}
            {{ /if }}
        {{ /events }}

        {{ if no_results }}
            <div class="col-span-full text-center py-16 bg-gray-50 rounded-2xl border-2 border-dashed border-gray-200">
                <p class="text-gray-500 text-xl font-medium">No upcoming events found.</p>
            </div>
        {{ /if }}
      {{ /collection:events }}
    </div>

  </div>
</section>
