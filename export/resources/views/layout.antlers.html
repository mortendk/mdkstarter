{{ if config:app:debug is true }}<!-- ðŸ‘‹ resources/views/layout.antlers.html -->{{ /if }}

<!doctype html>
<html lang="{{ site:short_locale }}">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="manifest" href="/manifest.webmanifest">
    {{ if brand:browser_color }}
    <meta name="theme-color" content="{{ brand:browser_color }}">
    {{ /if }}
    {{ partial:head/seo }}
    {{ partial:head/verification }}
    {{ partial:head/icon }}
    {{ feedamic }}
    {{ settings:header_scipts }}
    {{ vite src="resources/js/site.js|resources/css/site.css" }}

    <script>
        if (localStorage.getItem('dark_mode') === 'true' || (!('dark_mode' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
    </script>

    {{# Conditional Consent Scripts (Header) #}}
    {{ if legal:enable_cookie_banner }}
    <template id="consent-scripts-header">
        {{ legal:consent_scripts }}
    </template>
    <script>
        if (localStorage.getItem('cookie_consent') === 'accepted') {
            window.addEventListener('DOMContentLoaded', () => {
                const template = document.getElementById('consent-scripts-header');
                if (template) {
                    const content = template.content.cloneNode(true);
                    Array.from(content.querySelectorAll('script')).forEach(oldScript => {
                        const newScript = document.createElement('script');
                        Array.from(oldScript.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value));
                        newScript.innerHTML = oldScript.innerHTML;
                        document.head.appendChild(newScript);
                    });
                }
            });
        }
    </script>
    {{ /if }}
  </head>

  <body class="flex flex-col h-screen bg-linear-to-r from-amber-100 to-white text-amber-800" x-data="{ openmenu: false, consent: localStorage.getItem('cookie_consent') }" :class="openmenu ? 'overflow-y-hidden' : ''">

  {{ partial:cookie_consent }}

    {{ partial:notifications/banner }}

    {{ partial:header }}

    <main id="main" tabindex="-1" class="flex flex-col flex-grow focus-visible:outline-0 lg:mt-0 mt-16">
      {{ template_content }}
    </main>

    {{ partial:footer }}

    {{# Conditional Consent Scripts (Footer) #}}
    {{ if legal:enable_cookie_banner }}
    <template id="consent-scripts-footer">
        {{ legal:consent_scripts_footer }}
    </template>
    <script>
        if (localStorage.getItem('cookie_consent') === 'accepted') {
            window.addEventListener('DOMContentLoaded', () => {
                const template = document.getElementById('consent-scripts-footer');
                if (template) {
                    const content = template.content.cloneNode(true);
                    Array.from(content.querySelectorAll('script')).forEach(oldScript => {
                        const newScript = document.createElement('script');
                        Array.from(oldScript.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value));
                        newScript.innerHTML = oldScript.innerHTML;
                        document.body.appendChild(newScript);
                    });
                }
            });
        }
    </script>
    {{ /if }}

    {{ settings:footer_script }}
  </body>

</html>